<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第6章 Symbol和Symbol属性 | Huangshunq</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.61085d8a.css" as="style"><link rel="preload" href="/assets/js/app.a5854e51.js" as="script"><link rel="preload" href="/assets/js/11.f3da93cc.js" as="script"><link rel="prefetch" href="/assets/js/10.b3f84bea.js"><link rel="prefetch" href="/assets/js/2.641e37de.js"><link rel="prefetch" href="/assets/js/3.e671b636.js"><link rel="prefetch" href="/assets/js/4.346c72c5.js"><link rel="prefetch" href="/assets/js/5.55c5d5c5.js"><link rel="prefetch" href="/assets/js/6.b5cdcf90.js"><link rel="prefetch" href="/assets/js/7.3a68b4cb.js"><link rel="prefetch" href="/assets/js/8.5d382610.js"><link rel="prefetch" href="/assets/js/9.465ab1c2.js"><link rel="prefetch" href="/assets/js/12.6e04c87e.js"><link rel="prefetch" href="/assets/js/13.c0f5d400.js"><link rel="prefetch" href="/assets/js/14.581253b5.js"><link rel="prefetch" href="/assets/js/15.829c5578.js"><link rel="prefetch" href="/assets/js/16.57a9ab57.js"><link rel="prefetch" href="/assets/js/17.6a43ebee.js"><link rel="prefetch" href="/assets/js/18.76324f2b.js"><link rel="prefetch" href="/assets/js/19.5d3ea9e9.js"><link rel="prefetch" href="/assets/js/20.45560d07.js"><link rel="prefetch" href="/assets/js/21.3490a2ad.js"><link rel="prefetch" href="/assets/js/22.a02be50f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.61085d8a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Huangshunq</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">档案</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ES6/01-块级作用域绑定.html" class="nav-link">《深入理解ES6》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ES6/06-Symbol和Symbol属性.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/Huangshunq/Huangshunq.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">档案</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ES6/01-块级作用域绑定.html" class="nav-link">《深入理解ES6》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ES6/06-Symbol和Symbol属性.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/Huangshunq/Huangshunq.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/ES6/01-块级作用域绑定.html" class="sidebar-link">第1章 块级作用域绑定</a></li><li><a href="/ES6/02-字符串和正则表达式.html" class="sidebar-link">第2章 字符串和正则表达式</a></li><li><a href="/ES6/03-函数.html" class="sidebar-link">第3章 函数</a></li><li><a href="/ES6/04-拓展对象的功能性.html" class="sidebar-link">第4章 拓展对象的功能性</a></li><li><a href="/ES6/05-解构：使数据访问更便捷.html" class="sidebar-link">第5章 解构：使数据访问更便捷</a></li><li><a href="/ES6/06-Symbol和Symbol属性.html" class="active sidebar-link">第6章 Symbol和Symbol属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ES6/06-Symbol和Symbol属性.html#symbol介绍" class="sidebar-link">Symbol介绍</a></li><li class="sidebar-sub-header"><a href="/ES6/06-Symbol和Symbol属性.html#全局symbol" class="sidebar-link">全局Symbol</a></li><li class="sidebar-sub-header"><a href="/ES6/06-Symbol和Symbol属性.html#symbol类型转换" class="sidebar-link">Symbol类型转换</a></li><li class="sidebar-sub-header"><a href="/ES6/06-Symbol和Symbol属性.html#symbol属性检索" class="sidebar-link">Symbol属性检索</a></li><li class="sidebar-sub-header"><a href="/ES6/06-Symbol和Symbol属性.html#well-known-symbol" class="sidebar-link">well-known Symbol</a></li></ul></li><li><a href="/ES6/07-Set集合与Map集合.html" class="sidebar-link">第7章 Set集合与Map集合</a></li><li><a href="/ES6/08-Iterator和Generator.html" class="sidebar-link">第8章 Iterator和Generator</a></li><li><a href="/ES6/09-类.html" class="sidebar-link">第9章 类</a></li><li><a href="/ES6/10-改进数组的功能.html" class="sidebar-link">第10章 改进数组的功能</a></li><li><a href="/ES6/11-Promise与异步编程.html" class="sidebar-link">第11章 Promise与异步编程</a></li><li><a href="/ES6/12-代理（Proxy）和反射（Reflection）API.html" class="sidebar-link">第12章 代理（Proxy）和反射（Reflection）API</a></li><li><a href="/ES6/13-用模块封装代码.html" class="sidebar-link">第13章 用模块封装代码</a></li><li><a href="/ES6/附录A.html" class="sidebar-link">附录 A 较小变动</a></li><li><a href="/ES6/附录B-ES2016.html" class="sidebar-link">附录 B ES2016（ES7）</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="第6章-symbol和symbol属性"><a href="#第6章-symbol和symbol属性" aria-hidden="true" class="header-anchor">#</a> 第6章 <code>Symbol</code>和<code>Symbol</code>属性</h1> <h2 id="symbol介绍"><a href="#symbol介绍" aria-hidden="true" class="header-anchor">#</a> <code>Symbol</code>介绍</h2> <p>之前版本的语言中有字符串型、数字型、布尔型、<code>null</code>和<code>undefined</code>5种原始数据类型，现在新增一种<code>Symbol</code>原始数据类型，用来保证每个属性的名字都是独一无二的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用方式</span>
<span class="token keyword">let</span> firstName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

person<span class="token punctuation">[</span>firstName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'someone'</span><span class="token punctuation">;</span>

<span class="token comment">// 不能使用 new 创建实例</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>

<span class="token comment">// 可以传入一个用于描述的参数</span>
<span class="token keyword">let</span> secondName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'second name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>secondName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Symbol(second name)'</span>

<span class="token comment">// 可用 typeof 检测 symbol 类型，推荐</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> secondName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'symbol'</span>

<span class="token comment">// 可以用于对象字面量中计算属性</span>
<span class="token keyword">let</span> otherPeople <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>secondName<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'second one'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 将属性设置为只读：</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> firstName<span class="token punctuation">,</span> <span class="token punctuation">{</span> writable<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>secondName<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        value<span class="token punctuation">:</span> <span class="token string">'second one'</span><span class="token punctuation">,</span>
        writable<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Symbol</code>用于描述的参数存储在<code>[[Description]]</code>内部属性中，调用<code>Symbol.toString()</code>才能读取该属性，<code>console.log()</code>隐式调用该方法并输出。</p> <h2 id="全局symbol"><a href="#全局symbol" aria-hidden="true" class="header-anchor">#</a> 全局<code>Symbol</code></h2> <p>若想在不同地方共享同一个<code>Symbol</code>，可以利用新增的全局<code>Symbol</code>注册表。使用<code>Symbol.for()</code>创建获取一个共享的<code>Symbol</code>；<code>Symbol.keyFor()</code>在全局注册表上检索有关的键。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 传入一个作为键的参数，也用于描述</span>
<span class="token keyword">let</span> uid <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'uid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

object<span class="token punctuation">[</span>uid<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Symbol(uid)'</span>

<span class="token comment">// 先在全局 Symbol 注册表上找键为'uid'的Symbol，找到则返回该值，否则新建一个返回</span>
<span class="token keyword">let</span> uid2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'uid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uid <span class="token operator">===</span> uid2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uid2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Symbol(uid)'</span>

<span class="token comment">// 用值检索对应键</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'uid'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>uid2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'uid'</span>

<span class="token comment">// 没注册</span>
<span class="token keyword">let</span> uid3 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'uid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>uid3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div><h2 id="symbol类型转换"><a href="#symbol类型转换" aria-hidden="true" class="header-anchor">#</a> <code>Symbol</code>类型转换</h2> <p><code>Symbol</code>类型不能强制转换成字符串（字符拼接会报错）和数字类型。使用逻辑运算符时，<code>Symbol</code>等价为<code>true</code>。</p> <h2 id="symbol属性检索"><a href="#symbol属性检索" aria-hidden="true" class="header-anchor">#</a> <code>Symbol</code>属性检索</h2> <p><code>Symbol</code> 作为属性名，该属性不会出现在<code>for...in</code>、<code>for...of</code>循环中，也不会被<code>Object.keys()</code>、<code>Object.getOwnPropertyNames()</code>、<code>JSON.stringify()</code>返回。但是，它也不是私有属性，<code>Object.getOwnProperty-Symbols()</code>可以检索对象中<code>Symbol</code>属性，返回包含所有拥有的<code>Symbol</code>的数组。</p> <h2 id="well-known-symbol"><a href="#well-known-symbol" aria-hidden="true" class="header-anchor">#</a> well-known Symbol</h2> <p>除了定义自己使用的 <code>Symbol</code> 值以外，ES6 还提供了 11 个内置的<code>Symbol</code>值，指向语言内部使用的方法。重写这些方法，会改变对象的内部默认行为，变成一个奇异（exotic）对象。</p> <h3 id="symbol-hasinstance"><a href="#symbol-hasinstance" aria-hidden="true" class="header-anchor">#</a> <code>Symbol.hasInstance</code></h3> <p>用于确定对象是否为函数实例，只接受一个参数，即要检查的值，若值为函数实例，则返回<code>true</code>。定义在<code>Function.prototype</code>中，不可写、不可配置、不可枚举。</p> <div class="language-js extra-class"><pre class="language-js"><code>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">;</span>

<span class="token comment">// 等价于</span>
Array<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>因为其不可写，只能用<code>Object.defineProperty()</code>改写。建议只在确实有需要才修改，因为会让运行结果不合常态：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">MyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>MyObject<span class="token punctuation">,</span> Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">MyObject</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="symbol-isconcatspreadable"><a href="#symbol-isconcatspreadable" aria-hidden="true" class="header-anchor">#</a> <code>Symbol.isConcatSpreadable</code></h3> <p>该属性是一个布尔值，标准对象没有这个属性，用于增强对象类型的<code>concat()</code>功能：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> collection <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
    length<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Hi'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['Hi', 'hello', 'world']</span>
</code></pre></div><p>该值为<code>true</code>表明属性值应当作为独立元素添加到数组中。</p> <h3 id="正则的symbol属性"><a href="#正则的symbol属性" aria-hidden="true" class="header-anchor">#</a> 正则的<code>Symbol</code>属性</h3> <ul><li><code>Symbol.match</code></li> <li><code>Symbol.replace</code></li> <li><code>Symbol.search</code></li> <li><code>Symbol.split</code></li></ul> <p>以上属性分别表示<code>match()</code>、<code>replace()</code>、<code>search()</code>、<code>split()</code>第一个参数应该调用正则表达式的方法，定义在<code>RegExp.prototype</code>中。对象的这些属性，指向一个函数。当执行对应方法时，如果该属性存在，会调用它，返回该方法的返回值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 等价于 /^.{10}$/</span>
<span class="token comment">// val 参数为字符串</span>
<span class="token keyword">let</span> hasLengthOf10 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>match<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> val<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token punctuation">[</span>val<span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 接受两个参数，第二个为替换用的字符串</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>replace<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> rep<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> val<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">10</span> <span class="token operator">?</span> rep <span class="token punctuation">:</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>search<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> val<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>split<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> val<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span>val<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> msg1 <span class="token operator">=</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span> <span class="token comment">// 11</span>
<span class="token keyword">let</span> msg2 <span class="token operator">=</span> <span class="token string">'hello john'</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>

<span class="token keyword">let</span> match1 <span class="token operator">=</span> msg1<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>hasLengthOf10<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// null</span>
    match2 <span class="token operator">=</span> msg2<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>hasLengthOf10<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['hello john']</span>

<span class="token keyword">let</span> replace1 <span class="token operator">=</span> msg1<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>hasLengthOf10<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 'hello world'</span>
    replace2 <span class="token operator">=</span> msg2<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>hasLengthOf10<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello john'</span>

<span class="token keyword">let</span> search1 <span class="token operator">=</span> msg1<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>hasLengthOf10<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// -1</span>
    search2 <span class="token operator">=</span> msg2<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>hasLengthOf10<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

<span class="token keyword">let</span> split1 <span class="token operator">=</span> msg1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>hasLengthOf10<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// ['hello world']</span>
    split2 <span class="token operator">=</span> msg2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>hasLengthOf10<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['', '']</span>
</code></pre></div><h3 id="symbol-toprimitive"><a href="#symbol-toprimitive" aria-hidden="true" class="header-anchor">#</a> <code>Symbol.toPrimitive</code></h3> <p>该属性指向的方法定义在每一个标准类型的原型上，规定了对象被转换为原始值时应当执行的操作。当对象需要转换为原始值时，总会调用该属性的方法并传入一个参数，该参数叫类型提示（hint）。类型提示参数的值只有三种：<code>'number'</code>、<code>'string'</code>、<code>'default'</code>，对应返回值通常分别是：数字、字符串、无类型偏好的值。</p> <p>方法内部有三种动作：</p> <p>1.调用<code>valueOf()</code>，若结果为原始值，则返回</p> <p>2.调用<code>toString()</code>，若结果为原始值，则返回</p> <p>3.抛出错误</p> <p>数字模式下，会按 1，2，3 的顺序运行；</p> <p>字符串模式下，会按 2，1，3 的顺序运行；</p> <p>默认模式下，大多数对象按数字模式处理（<code>Date</code>对象会按字符串模式处理）。该模式只用于<code>==</code>运算，<code>+</code>运算及给<code>Date</code>构造函数传递一个参数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Tem</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>deg <span class="token operator">=</span> deg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 覆写</span>
Tem<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>hint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>hint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'string'</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>deg <span class="token operator">+</span> <span class="token string">'\u00b0'</span><span class="token punctuation">;</span> <span class="token comment">// 度数符号</span>
        <span class="token keyword">case</span> <span class="token string">'number'</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>deg<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'default'</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>deg <span class="token operator">+</span> <span class="token string">' deg'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> freezing <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tem</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>freezing <span class="token operator">+</span> <span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '32 degrees!'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>freezing <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 16</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>freezing<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '32\u00b0'</span>
</code></pre></div><h3 id="symbol-tostringtag"><a href="#symbol-tostringtag" aria-hidden="true" class="header-anchor">#</a> <code>Symbol.toStringTag</code></h3> <p>ECMAScript 6 重新定义了原生对象过去的状态，通过该属性改变了调用<code>Object.prototype.toString()</code>时返回的值，每个对象都有该属性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES 5</span>
<span class="token keyword">function</span> <span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES 6 可以自定义该属性</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Person'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'me'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>me<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '[object Person]'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>me<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '[object Person]'</span>
</code></pre></div><blockquote><p>所有对象的<code>Symbol.toStringTag</code>默认都为'object'</p></blockquote> <p>该属性可以随意修改，但最好不要修改属性。</p> <h3 id="symbol-unscopables"><a href="#symbol-unscopables" aria-hidden="true" class="header-anchor">#</a> <code>Symbol.unscopables</code></h3> <p>该属性通常用于<code>Array.prototype</code>，用来标示在<code>with</code>语句中不创建绑定的属性名。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// ES 6 中，语句内 values 将会被绑定为 Array.values，与原意不符。</span>
<span class="token keyword">with</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 该属性指向对象，键为在 with 语句中忽略的标识符，值必须为 true</span>
<span class="token comment">// with 语句将不再创建这些方法的绑定，以支持老代码运行</span>
Array<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>unscopables<span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    copyWithin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    entries<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    fill<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    find<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    findIndex<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    keys<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    values<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <p><strong>参考资料</strong></p> <ul><li>《深入理解ES6》</li> <li><a href="http://es6.ruanyifeng.com/#docs/symbol" target="_blank" rel="noopener noreferrer">《ECMAScript 6 入门》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/11.f3da93cc.js" defer></script><script src="/assets/js/app.a5854e51.js" defer></script>
  </body>
</html>

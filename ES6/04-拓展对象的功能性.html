<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第4章 拓展对象的功能性 | Huangshunq</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.61085d8a.css" as="style"><link rel="preload" href="/assets/js/app.73a72f5f.js" as="script"><link rel="preload" href="/assets/js/9.465ab1c2.js" as="script"><link rel="prefetch" href="/assets/js/10.b3f84bea.js"><link rel="prefetch" href="/assets/js/2.641e37de.js"><link rel="prefetch" href="/assets/js/3.e671b636.js"><link rel="prefetch" href="/assets/js/4.346c72c5.js"><link rel="prefetch" href="/assets/js/5.55c5d5c5.js"><link rel="prefetch" href="/assets/js/6.b5cdcf90.js"><link rel="prefetch" href="/assets/js/7.3a68b4cb.js"><link rel="prefetch" href="/assets/js/8.5d382610.js"><link rel="prefetch" href="/assets/js/11.f3da93cc.js"><link rel="prefetch" href="/assets/js/12.6e04c87e.js"><link rel="prefetch" href="/assets/js/13.c0f5d400.js"><link rel="prefetch" href="/assets/js/14.581253b5.js"><link rel="prefetch" href="/assets/js/15.829c5578.js"><link rel="prefetch" href="/assets/js/16.57a9ab57.js"><link rel="prefetch" href="/assets/js/17.6a43ebee.js"><link rel="prefetch" href="/assets/js/18.76324f2b.js"><link rel="prefetch" href="/assets/js/19.5d3ea9e9.js"><link rel="prefetch" href="/assets/js/20.45560d07.js"><link rel="prefetch" href="/assets/js/21.3490a2ad.js"><link rel="prefetch" href="/assets/js/22.a02be50f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.61085d8a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Huangshunq</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">档案</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ES6/01-块级作用域绑定.html" class="nav-link">《深入理解ES6》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ES6/04-拓展对象的功能性.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/Huangshunq/Huangshunq.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">档案</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ES6/01-块级作用域绑定.html" class="nav-link">《深入理解ES6》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ES6/04-拓展对象的功能性.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/Huangshunq/Huangshunq.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/ES6/01-块级作用域绑定.html" class="sidebar-link">第1章 块级作用域绑定</a></li><li><a href="/ES6/02-字符串和正则表达式.html" class="sidebar-link">第2章 字符串和正则表达式</a></li><li><a href="/ES6/03-函数.html" class="sidebar-link">第3章 函数</a></li><li><a href="/ES6/04-拓展对象的功能性.html" class="active sidebar-link">第4章 拓展对象的功能性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ES6/04-拓展对象的功能性.html#对象类别" class="sidebar-link">对象类别</a></li><li class="sidebar-sub-header"><a href="/ES6/04-拓展对象的功能性.html#对象字面量语法拓展" class="sidebar-link">对象字面量语法拓展</a></li><li class="sidebar-sub-header"><a href="/ES6/04-拓展对象的功能性.html#新增对象方法" class="sidebar-link">新增对象方法</a></li><li class="sidebar-sub-header"><a href="/ES6/04-拓展对象的功能性.html#重复字面量属性" class="sidebar-link">重复字面量属性</a></li><li class="sidebar-sub-header"><a href="/ES6/04-拓展对象的功能性.html#自有属性枚举顺序" class="sidebar-link">自有属性枚举顺序</a></li><li class="sidebar-sub-header"><a href="/ES6/04-拓展对象的功能性.html#对象原型" class="sidebar-link">对象原型</a></li><li class="sidebar-sub-header"><a href="/ES6/04-拓展对象的功能性.html#将方法定义为一个函数" class="sidebar-link">将方法定义为一个函数</a></li></ul></li><li><a href="/ES6/05-解构：使数据访问更便捷.html" class="sidebar-link">第5章 解构：使数据访问更便捷</a></li><li><a href="/ES6/06-Symbol和Symbol属性.html" class="sidebar-link">第6章 Symbol和Symbol属性</a></li><li><a href="/ES6/07-Set集合与Map集合.html" class="sidebar-link">第7章 Set集合与Map集合</a></li><li><a href="/ES6/08-Iterator和Generator.html" class="sidebar-link">第8章 Iterator和Generator</a></li><li><a href="/ES6/09-类.html" class="sidebar-link">第9章 类</a></li><li><a href="/ES6/10-改进数组的功能.html" class="sidebar-link">第10章 改进数组的功能</a></li><li><a href="/ES6/11-Promise与异步编程.html" class="sidebar-link">第11章 Promise与异步编程</a></li><li><a href="/ES6/12-代理（Proxy）和反射（Reflection）API.html" class="sidebar-link">第12章 代理（Proxy）和反射（Reflection）API</a></li><li><a href="/ES6/13-用模块封装代码.html" class="sidebar-link">第13章 用模块封装代码</a></li><li><a href="/ES6/附录A.html" class="sidebar-link">附录 A 较小变动</a></li><li><a href="/ES6/附录B-ES2016.html" class="sidebar-link">附录 B ES2016（ES7）</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="第4章-拓展对象的功能性"><a href="#第4章-拓展对象的功能性" aria-hidden="true" class="header-anchor">#</a> 第4章 拓展对象的功能性</h1> <h2 id="对象类别"><a href="#对象类别" aria-hidden="true" class="header-anchor">#</a> 对象类别</h2> <ul><li>普通（Ordinary）对象：具有JavaScript对象所有的默认内部行为。</li> <li>特异（Exotic）对象：具有某些与默认行为不符的内部行为。</li> <li>标准（Standard）对象：ECMAScript 6 规范中定义的对象如<code>Date</code>，可以是普通对象，也可以是特异对象。</li> <li>内建对象：脚本开始执行时存在于JavaScript执行环境中的对象，所有标准对象都是内建对象。</li></ul> <h2 id="对象字面量语法拓展"><a href="#对象字面量语法拓展" aria-hidden="true" class="header-anchor">#</a> 对象字面量语法拓展</h2> <p>新增了下面几种语法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES5</span>
<span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
        age<span class="token punctuation">:</span> age<span class="token punctuation">,</span>
        sayName<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES6</span>
<span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token comment">// 属性初始化简写</span>
        name<span class="token punctuation">,</span>
        age<span class="token punctuation">,</span>
        <span class="token comment">// 方法简写</span>
        <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>简写方法具有<code>name</code>属性，值为小括号前的名称，还可以使用<code>super</code>关键字，而非简写则不能。</p></blockquote> <h3 id="计算属性（computed-property-name）"><a href="#计算属性（computed-property-name）" aria-hidden="true" class="header-anchor">#</a> 计算属性（Computed Property Name）</h3> <p>对象字面量中，想通过计算获得属性名，需要用方括号代替点记法，有特定字符的字符串字面量作为标识符会出错，但可直接作为属性名，也可用方括号访问：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'first name'</span><span class="token punctuation">:</span> <span class="token string">'Tim'</span> <span class="token comment">// 字符串作为属性名</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    lastName <span class="token operator">=</span> <span class="token string">'last name'</span><span class="token punctuation">;</span>
    
person<span class="token punctuation">[</span><span class="token string">'first name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Baker'</span><span class="token punctuation">;</span> <span class="token comment">// 方括号访问</span>
person<span class="token punctuation">[</span>lastName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Zakas'</span><span class="token punctuation">;</span> <span class="token comment">// 计算属性</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">[</span><span class="token string">'first name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">[</span>lastName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ECMAScript 6中，对象字面量也可用计算属性作为属性名称：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> lastName <span class="token operator">=</span> <span class="token string">'last name'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'first name'</span><span class="token punctuation">:</span> <span class="token string">'Baker'</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>lastName<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'Tim'</span> <span class="token comment">// 定义计算属性</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">[</span><span class="token string">'first name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">[</span>lastName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="新增对象方法"><a href="#新增对象方法" aria-hidden="true" class="header-anchor">#</a> 新增对象方法</h2> <h3 id="object-is"><a href="#object-is" aria-hidden="true" class="header-anchor">#</a> <code>Object.is()</code></h3> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">==</span> <span class="token string">'5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">===</span> <span class="token string">'5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// false</span>
</code></pre></div><p><code>Object.is()</code>运行结果大部分与<code>===</code>运算符相同，唯一区别是<code>Object.is()</code>会将<code>+0</code>和<code>-0</code>识别为不相等并且<code>NaN</code>与<code>NaN</code>等价。</p> <h3 id="object-assign"><a href="#object-assign" aria-hidden="true" class="header-anchor">#</a> <code>Object.assign()</code></h3> <p>混合（Mixin）是让一个对象不用继承而获得其它对象属性的模式（合并对象）。</p> <p><code>Object.assign()</code>实现相同的功能，实行的是 <strong>浅拷贝</strong>（如果源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用）：</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source1<span class="token punctuation">,</span> source2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 第一个参数是目标对象，后面的参数都是源对象</span>
</code></pre></div><blockquote><ul><li>如果多个源对象具有同名属性，则后面会覆盖前面的。</li> <li><code>Object.assign</code>只能进行值的复制，如果要复制的值是一个取值函数<code>get</code>，那么将求值后再复制。</li></ul></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source<span class="token punctuation">)</span>
<span class="token comment">// { foo: 1 }</span>
</code></pre></div><h2 id="重复字面量属性"><a href="#重复字面量属性" aria-hidden="true" class="header-anchor">#</a> 重复字面量属性</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span>

<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">'Tim'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ES5下，重复属性会报错，但是ECMAScript 6下不报错，值会取后一个。</p> <h2 id="自有属性枚举顺序"><a href="#自有属性枚举顺序" aria-hidden="true" class="header-anchor">#</a> 自有属性枚举顺序</h2> <p>以前未定义对象属性的枚举顺序，ECMAScript 6规定了自有属性枚举的顺序规则：</p> <ol><li>所有数字键按升序排序，优先排在前面</li> <li>所有字符串按照它们被加入对象的顺序排序，排在数字键后面。</li> <li>所有<code>symbol</code>键按照它们被加入对象顺序排序。</li></ol> <blockquote><p><code>for-in</code>循环、<code>Object.keys()</code>、<code>JSON.stringify()</code>枚举顺序尚不明确。</p></blockquote> <h2 id="对象原型"><a href="#对象原型" aria-hidden="true" class="header-anchor">#</a> 对象原型</h2> <h3 id="改变对象的原型"><a href="#改变对象的原型" aria-hidden="true" class="header-anchor">#</a> 改变对象的原型</h3> <p><code>Object.setPrototypeOf()</code>可以改变任意指定对象的原型，第一个参数是被改变原型的对象，第二个参数是替代第一个参数原型的对象。</p> <p>对象原型的真实值被储存在内部专门属性<code>[[Prototype]]</code>中，调用<code>Object.getPrototypeOf()</code>会返回储存在其中的值，调用<code>Object.setPrototypeOf()</code>会改变其中的值。</p> <h3 id="super访问引用"><a href="#super访问引用" aria-hidden="true" class="header-anchor">#</a> <code>super</code>访问引用</h3> <p>如果你想重写对象实例的方法，又要调用与它同名的原型方法，可以用<code>super</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Woof'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ES6</span>
<span class="token keyword">let</span> friend <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 相当于ES5中：</span>
        <span class="token comment">// Object.getPrototypeOf(this).getGreeting.call(this) + ', hi!';</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', hi!'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>friend<span class="token punctuation">,</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span><span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Woof, hi!'</span>

<span class="token comment">// 语法错误：必须使用简写方法才能用 super</span>
<span class="token keyword">let</span> anotherFriend <span class="token operator">=</span> <span class="token punctuation">{</span>
    getGreeting<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', haha!'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>super</code>引用可以解决以前多重继承的问题。</p></blockquote> <h2 id="将方法定义为一个函数"><a href="#将方法定义为一个函数" aria-hidden="true" class="header-anchor">#</a> 将方法定义为一个函数</h2> <p>ECMAScript 6中将方法定义为一个函数，它会有一个内部的<code>[[HomeObject]]</code>属性储存方法从属的对象。</p> <p><code>super</code>会在<code>[[HomeObject]]</code>属性上调用<code>Object.getPrototypeOf()</code>得到原型的引用，然后搜寻原型找到同名函数，最后设置<code>this</code>绑定并且调用相应的方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是方法</span>
    <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'hi!'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 不是方法</span>
<span class="token keyword">function</span> <span class="token function">shareGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'hi!'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <p><strong>参考资料</strong></p> <ul><li>《深入理解ES6》</li> <li><a href="http://es6.ruanyifeng.com/#docs/string#%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" target="_blank" rel="noopener noreferrer">《ECMAScript 6 入门》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/9.465ab1c2.js" defer></script><script src="/assets/js/app.73a72f5f.js" defer></script>
  </body>
</html>
